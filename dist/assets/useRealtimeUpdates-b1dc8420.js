import{c as me,g as Q,r as d,i as D,j as a,P as w,l as U,m as ve,h as z,s as Ce,f as be,R as f,a as O,e as xe}from"./index-692334f1.js";import{a as B}from"./index-1185bc7d.js";import{u as he}from"./index-99ccf18f.js";import{s as F}from"./supabase-client-5015c98a.js";const ge=me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var T="Collapsible",[Ae,Y]=Q(T),[Re,M]=Ae(T),J=d.forwardRef((e,n)=>{const{__scopeCollapsible:o,open:t,defaultOpen:s,disabled:r,onOpenChange:c,...l}=e,[p=!1,u]=D({prop:t,defaultProp:s,onChange:c});return a.jsx(Re,{scope:o,disabled:r,contentId:B(),open:p,onOpenToggle:d.useCallback(()=>u(m=>!m),[u]),children:a.jsx(w.div,{"data-state":L(p),"data-disabled":r?"":void 0,...l,ref:n})})});J.displayName=T;var W="CollapsibleTrigger",X=d.forwardRef((e,n)=>{const{__scopeCollapsible:o,...t}=e,s=M(W,o);return a.jsx(w.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":L(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...t,ref:n,onClick:U(e.onClick,s.onOpenToggle)})});X.displayName=W;var $="CollapsibleContent",Z=d.forwardRef((e,n)=>{const{forceMount:o,...t}=e,s=M($,e.__scopeCollapsible);return a.jsx(ve,{present:o||s.open,children:({present:r})=>a.jsx(we,{...t,ref:n,present:r})})});Z.displayName=$;var we=d.forwardRef((e,n)=>{const{__scopeCollapsible:o,present:t,children:s,...r}=e,c=M($,o),[l,p]=d.useState(t),u=d.useRef(null),m=z(n,u),v=d.useRef(0),A=v.current,b=d.useRef(0),y=b.current,x=c.open||l,h=d.useRef(x),g=d.useRef(void 0);return d.useEffect(()=>{const i=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(i)},[]),Ce(()=>{const i=u.current;if(i){g.current=g.current||{transitionDuration:i.style.transitionDuration,animationName:i.style.animationName},i.style.transitionDuration="0s",i.style.animationName="none";const R=i.getBoundingClientRect();v.current=R.height,b.current=R.width,h.current||(i.style.transitionDuration=g.current.transitionDuration,i.style.animationName=g.current.animationName),p(t)}},[c.open,t]),a.jsx(w.div,{"data-state":L(c.open),"data-disabled":c.disabled?"":void 0,id:c.contentId,hidden:!x,...r,ref:m,style:{"--radix-collapsible-content-height":A?`${A}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...e.style},children:x&&s})});function L(e){return e?"open":"closed"}var ye=J,Ie=X,_e=Z,C="Accordion",Ne=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[V,Pe,je]=be(C),[_,Ue]=Q(C,[je,Y]),H=Y(),ee=f.forwardRef((e,n)=>{const{type:o,...t}=e,s=t,r=t;return a.jsx(V.Provider,{scope:e.__scopeAccordion,children:o==="multiple"?a.jsx(De,{...r,ref:n}):a.jsx(Se,{...s,ref:n})})});ee.displayName=C;var[oe,Ee]=_(C),[te,ke]=_(C,{collapsible:!1}),Se=f.forwardRef((e,n)=>{const{value:o,defaultValue:t,onValueChange:s=()=>{},collapsible:r=!1,...c}=e,[l,p]=D({prop:o,defaultProp:t,onChange:s});return a.jsx(oe,{scope:e.__scopeAccordion,value:l?[l]:[],onItemOpen:p,onItemClose:f.useCallback(()=>r&&p(""),[r,p]),children:a.jsx(te,{scope:e.__scopeAccordion,collapsible:r,children:a.jsx(ne,{...c,ref:n})})})}),De=f.forwardRef((e,n)=>{const{value:o,defaultValue:t,onValueChange:s=()=>{},...r}=e,[c=[],l]=D({prop:o,defaultProp:t,onChange:s}),p=f.useCallback(m=>l((v=[])=>[...v,m]),[l]),u=f.useCallback(m=>l((v=[])=>v.filter(A=>A!==m)),[l]);return a.jsx(oe,{scope:e.__scopeAccordion,value:c,onItemOpen:p,onItemClose:u,children:a.jsx(te,{scope:e.__scopeAccordion,collapsible:!0,children:a.jsx(ne,{...r,ref:n})})})}),[Oe,N]=_(C),ne=f.forwardRef((e,n)=>{const{__scopeAccordion:o,disabled:t,dir:s,orientation:r="vertical",...c}=e,l=f.useRef(null),p=z(l,n),u=Pe(o),v=he(s)==="ltr",A=U(e.onKeyDown,b=>{var q;if(!Ne.includes(b.key))return;const y=b.target,x=u().filter(k=>{var G;return!((G=k.ref.current)!=null&&G.disabled)}),h=x.findIndex(k=>k.ref.current===y),g=x.length;if(h===-1)return;b.preventDefault();let i=h;const R=0,P=g-1,j=()=>{i=h+1,i>P&&(i=R)},E=()=>{i=h-1,i<R&&(i=P)};switch(b.key){case"Home":i=R;break;case"End":i=P;break;case"ArrowRight":r==="horizontal"&&(v?j():E());break;case"ArrowDown":r==="vertical"&&j();break;case"ArrowLeft":r==="horizontal"&&(v?E():j());break;case"ArrowUp":r==="vertical"&&E();break}const fe=i%g;(q=x[fe].ref.current)==null||q.focus()});return a.jsx(Oe,{scope:o,disabled:t,direction:s,orientation:r,children:a.jsx(V.Slot,{scope:o,children:a.jsx(w.div,{...c,"data-orientation":r,ref:p,onKeyDown:t?void 0:A})})})}),I="AccordionItem",[Te,K]=_(I),re=f.forwardRef((e,n)=>{const{__scopeAccordion:o,value:t,...s}=e,r=N(I,o),c=Ee(I,o),l=H(o),p=B(),u=t&&c.value.includes(t)||!1,m=r.disabled||e.disabled;return a.jsx(Te,{scope:o,open:u,disabled:m,triggerId:p,children:a.jsx(ye,{"data-orientation":r.orientation,"data-state":de(u),...l,...s,ref:n,disabled:m,open:u,onOpenChange:v=>{v?c.onItemOpen(t):c.onItemClose(t)}})})});re.displayName=I;var ae="AccordionHeader",se=f.forwardRef((e,n)=>{const{__scopeAccordion:o,...t}=e,s=N(C,o),r=K(ae,o);return a.jsx(w.h3,{"data-orientation":s.orientation,"data-state":de(r.open),"data-disabled":r.disabled?"":void 0,...t,ref:n})});se.displayName=ae;var S="AccordionTrigger",ce=f.forwardRef((e,n)=>{const{__scopeAccordion:o,...t}=e,s=N(C,o),r=K(S,o),c=ke(S,o),l=H(o);return a.jsx(V.ItemSlot,{scope:o,children:a.jsx(Ie,{"aria-disabled":r.open&&!c.collapsible||void 0,"data-orientation":s.orientation,id:r.triggerId,...l,...t,ref:n})})});ce.displayName=S;var ie="AccordionContent",le=f.forwardRef((e,n)=>{const{__scopeAccordion:o,...t}=e,s=N(C,o),r=K(ie,o),c=H(o);return a.jsx(_e,{role:"region","aria-labelledby":r.triggerId,"data-orientation":s.orientation,...c,...t,ref:n,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});le.displayName=ie;function de(e){return e?"open":"closed"}var Me=ee,$e=re,Le=se,pe=ce,ue=le;const ze=Me,Ve=d.forwardRef(({className:e,...n},o)=>a.jsx($e,{ref:o,className:O("border-b",e),...n}));Ve.displayName="AccordionItem";const He=d.forwardRef(({className:e,children:n,...o},t)=>a.jsx(Le,{className:"flex",children:a.jsxs(pe,{ref:t,className:O("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...o,children:[n,a.jsx(ge,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));He.displayName=pe.displayName;const Ke=d.forwardRef(({className:e,children:n,...o},t)=>a.jsx(ue,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...o,children:a.jsx("div",{className:O("pb-4 pt-0",e),children:n})}));Ke.displayName=ue.displayName;const Be=()=>{const e=xe();d.useEffect(()=>{const n=F.channel("schema-db-changes").on("postgres_changes",{event:"*",schema:"public",table:"slots"},async()=>{await e.invalidateQueries({queryKey:["slots","slots-with-bookings"]})}).on("postgres_changes",{event:"*",schema:"public",table:"bookings"},async()=>{await e.invalidateQueries({queryKey:["slots","slots-with-bookings"]})}).subscribe();return()=>{F.removeChannel(n)}},[e])};export{ze as A,ge as C,Ve as a,He as b,Ke as c,Be as u};
//# sourceMappingURL=useRealtimeUpdates-b1dc8420.js.map
