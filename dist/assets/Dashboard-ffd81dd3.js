import{c as U,r as p,j as s,a as S,b as et,X as Bt,d as se,e as ke,N as ze}from"./index-692334f1.js";import{u as Ht}from"./index-1185bc7d.js";import{r as j,t as N,a as R,g as oe,_ as tt,b as $e,e as qt,f as W,i as at,c as K,u as ie}from"./index-55eef685.js";import{g as Ke,B as F,s as T,C as we,a as rt,b as nt,d as zt,e as je}from"./supabase-client-5015c98a.js";import{T as $t,a as Kt,b as Vt,c as ae}from"./tabs-04bc6101.js";import{u as Ut}from"./useRealtimeUpdates-b1dc8420.js";import{O as st,C as ot,g as Qt,T as it,D as lt,P as Xt,R as Gt,h as Jt,A as dt,i as Zt,a as ct,b as ut,c as ft,d as vt,e as mt,j as ht,f as pt}from"./alert-dialog-0254d15d.js";import{i as P,d as B,s as Ve}from"./index-6dbaa3ae.js";import{I as _e}from"./input-f321aa22.js";import{T as ea}from"./textarea-91d995a4.js";import{D as ta}from"./index-99ccf18f.js";const aa=U("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),ra=U("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),yt=U("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),xt=U("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),na=U("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Me=U("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),sa=U("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),oa=et("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ia=p.forwardRef(({className:e,variant:a,...t},r)=>s.jsx("div",{ref:r,role:"alert",className:S(oa({variant:a}),e),...t}));ia.displayName="Alert";const la=p.forwardRef(({className:e,...a},t)=>s.jsx("h5",{ref:t,className:S("mb-1 font-medium leading-none tracking-tight",e),...a}));la.displayName="AlertTitle";const da=p.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:S("text-sm [&_p]:leading-relaxed",e),...a}));da.displayName="AlertDescription";const ca=et("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function gt({className:e,variant:a,...t}){return s.jsx("div",{className:S(ca({variant:a}),e),...t})}function O(e,a){j(2,arguments);var t=N(e),r=R(a);return isNaN(r)?new Date(NaN):(r&&t.setDate(t.getDate()+r),t)}function E(e,a){j(2,arguments);var t=N(e),r=R(a);if(isNaN(r))return new Date(NaN);if(!r)return t;var n=t.getDate(),o=new Date(t.getTime());o.setMonth(t.getMonth()+r+1,0);var i=o.getDate();return n>=i?o:(t.setFullYear(o.getFullYear(),o.getMonth(),n),t)}function Y(e,a){var t,r,n,o,i,l,d,f;j(1,arguments);var c=oe(),u=R((t=(r=(n=(o=a==null?void 0:a.weekStartsOn)!==null&&o!==void 0?o:a==null||(i=a.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&n!==void 0?n:c.weekStartsOn)!==null&&r!==void 0?r:(d=c.locale)===null||d===void 0||(f=d.options)===null||f===void 0?void 0:f.weekStartsOn)!==null&&t!==void 0?t:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=N(e),m=v.getDay(),h=(m<u?7:0)+m-u;return v.setDate(v.getDate()-h),v.setHours(0,0,0,0),v}function V(e){return j(1,arguments),Y(e,{weekStartsOn:1})}function ua(e){j(1,arguments);var a=N(e),t=a.getFullYear(),r=new Date(0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);var n=V(r),o=new Date(0);o.setFullYear(t,0,4),o.setHours(0,0,0,0);var i=V(o);return a.getTime()>=n.getTime()?t+1:a.getTime()>=i.getTime()?t:t-1}function fa(e){j(1,arguments);var a=ua(e),t=new Date(0);t.setFullYear(a,0,4),t.setHours(0,0,0,0);var r=V(t);return r}function Ne(e,a){j(2,arguments);var t=R(a),r=t*7;return O(e,r)}function va(e,a){j(2,arguments);var t=R(a);return E(e,t*12)}function ma(e){j(1,arguments);var a;if(e&&typeof e.forEach=="function")a=e;else if(tt(e)==="object"&&e!==null)a=Array.prototype.slice.call(e);else return new Date(NaN);var t;return a.forEach(function(r){var n=N(r);(t===void 0||t<n||isNaN(Number(n)))&&(t=n)}),t||new Date(NaN)}function ha(e){j(1,arguments);var a;if(e&&typeof e.forEach=="function")a=e;else if(tt(e)==="object"&&e!==null)a=Array.prototype.slice.call(e);else return new Date(NaN);var t;return a.forEach(function(r){var n=N(r);(t===void 0||t>n||isNaN(n.getDate()))&&(t=n)}),t||new Date(NaN)}function J(e,a){j(2,arguments);var t=N(e),r=N(a),n=t.getFullYear()-r.getFullYear(),o=t.getMonth()-r.getMonth();return n*12+o}var pa=6048e5;function ya(e,a,t){j(2,arguments);var r=Y(e,t),n=Y(a,t),o=r.getTime()-$e(r),i=n.getTime()-$e(n);return Math.round((o-i)/pa)}function Se(e){j(1,arguments);var a=N(e),t=a.getMonth();return a.setFullYear(a.getFullYear(),t+1,0),a.setHours(23,59,59,999),a}function L(e){j(1,arguments);var a=N(e);return a.setDate(1),a.setHours(0,0,0,0),a}function xa(e){j(1,arguments);var a=N(e),t=new Date(0);return t.setFullYear(a.getFullYear(),0,1),t.setHours(0,0,0,0),t}function Oe(e,a){var t,r,n,o,i,l,d,f;j(1,arguments);var c=oe(),u=R((t=(r=(n=(o=a==null?void 0:a.weekStartsOn)!==null&&o!==void 0?o:a==null||(i=a.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&n!==void 0?n:c.weekStartsOn)!==null&&r!==void 0?r:(d=c.locale)===null||d===void 0||(f=d.options)===null||f===void 0?void 0:f.weekStartsOn)!==null&&t!==void 0?t:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=N(e),m=v.getDay(),h=(m<u?-7:0)+6-(m-u);return v.setDate(v.getDate()+h),v.setHours(23,59,59,999),v}function bt(e){return j(1,arguments),Oe(e,{weekStartsOn:1})}function ga(e){j(1,arguments);var a=N(e),t=a.getFullYear(),r=a.getMonth(),n=new Date(0);return n.setFullYear(t,r+1,0),n.setHours(0,0,0,0),n.getDate()}var ba=6048e5;function wa(e){j(1,arguments);var a=N(e),t=V(a).getTime()-fa(a).getTime();return Math.round(t/ba)+1}function ja(e){j(1,arguments);var a=N(e),t=a.getTime();return t}function _a(e){return j(1,arguments),Math.floor(ja(e)/1e3)}function Na(e,a){var t,r,n,o,i,l,d,f;j(1,arguments);var c=N(e),u=c.getFullYear(),v=oe(),m=R((t=(r=(n=(o=a==null?void 0:a.firstWeekContainsDate)!==null&&o!==void 0?o:a==null||(i=a.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:v.firstWeekContainsDate)!==null&&r!==void 0?r:(d=v.locale)===null||d===void 0||(f=d.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var h=new Date(0);h.setFullYear(u+1,0,m),h.setHours(0,0,0,0);var x=Y(h,a),y=new Date(0);y.setFullYear(u,0,m),y.setHours(0,0,0,0);var _=Y(y,a);return c.getTime()>=x.getTime()?u+1:c.getTime()>=_.getTime()?u:u-1}function Da(e,a){var t,r,n,o,i,l,d,f;j(1,arguments);var c=oe(),u=R((t=(r=(n=(o=a==null?void 0:a.firstWeekContainsDate)!==null&&o!==void 0?o:a==null||(i=a.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:c.firstWeekContainsDate)!==null&&r!==void 0?r:(d=c.locale)===null||d===void 0||(f=d.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&t!==void 0?t:1),v=Na(e,a),m=new Date(0);m.setFullYear(v,0,u),m.setHours(0,0,0,0);var h=Y(m,a);return h}var Ca=6048e5;function ka(e,a){j(1,arguments);var t=N(e),r=Y(t,a).getTime()-Da(t,a).getTime();return Math.round(r/Ca)+1}function Ma(e){j(1,arguments);var a=N(e),t=a.getMonth();return a.setFullYear(a.getFullYear(),t+1,0),a.setHours(0,0,0,0),a}function Sa(e,a){return j(1,arguments),ya(Ma(e),L(e),a)+1}function De(e,a){j(2,arguments);var t=N(e),r=N(a);return t.getTime()>r.getTime()}function wt(e,a){j(2,arguments);var t=N(e),r=N(a);return t.getTime()<r.getTime()}function Te(e,a){j(2,arguments);var t=N(e),r=N(a);return t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()}function Oa(e,a){j(2,arguments);var t=N(e),r=N(a);return t.getFullYear()===r.getFullYear()}function he(e,a){j(2,arguments);var t=R(a);return O(e,-t)}function pe(e,a){j(2,arguments);var t=N(e),r=R(a),n=t.getFullYear(),o=t.getDate(),i=new Date(0);i.setFullYear(n,r,15),i.setHours(0,0,0,0);var l=ga(i);return t.setMonth(r,Math.min(o,l)),t}function Ue(e,a){j(2,arguments);var t=N(e),r=R(a);return isNaN(t.getTime())?new Date(NaN):(t.setFullYear(r),t)}var b=function(){return b=Object.assign||function(a){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(a[o]=t[o])}return a},b.apply(this,arguments)};function Ta(e,a){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&a.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)a.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(t[r[n]]=e[r[n]]);return t}function jt(e,a,t){if(t||arguments.length===2)for(var r=0,n=a.length,o;r<n;r++)(o||!(r in a))&&(o||(o=Array.prototype.slice.call(a,0,r)),o[r]=a[r]);return e.concat(o||Array.prototype.slice.call(a))}function Z(e){return e.mode==="multiple"}function ee(e){return e.mode==="range"}function le(e){return e.mode==="single"}var Pa={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function La(e,a){return W(e,"LLLL y",a)}function Wa(e,a){return W(e,"d",a)}function Fa(e,a){return W(e,"LLLL",a)}function Ea(e){return"".concat(e)}function Ia(e,a){return W(e,"cccccc",a)}function Ra(e,a){return W(e,"yyyy",a)}var Ya=Object.freeze({__proto__:null,formatCaption:La,formatDay:Wa,formatMonthCaption:Fa,formatWeekNumber:Ea,formatWeekdayName:Ia,formatYearCaption:Ra}),Aa=function(e,a,t){return W(e,"do MMMM (EEEE)",t)},Ba=function(){return"Month: "},Ha=function(){return"Go to next month"},qa=function(){return"Go to previous month"},za=function(e,a){return W(e,"cccc",a)},$a=function(e){return"Week n. ".concat(e)},Ka=function(){return"Year: "},Va=Object.freeze({__proto__:null,labelDay:Aa,labelMonthDropdown:Ba,labelNext:Ha,labelPrevious:qa,labelWeekNumber:$a,labelWeekday:za,labelYearDropdown:Ka});function Ua(){var e="buttons",a=Pa,t=qt,r={},n={},o=1,i={},l=new Date;return{captionLayout:e,classNames:a,formatters:Ya,labels:Va,locale:t,modifiersClassNames:r,modifiers:n,numberOfMonths:o,styles:i,today:l,mode:"default"}}function Qa(e){var a=e.fromYear,t=e.toYear,r=e.fromMonth,n=e.toMonth,o=e.fromDate,i=e.toDate;return r?o=L(r):a&&(o=new Date(a,0,1)),n?i=Se(n):t&&(i=new Date(t,11,31)),{fromDate:o?Ve(o):void 0,toDate:i?Ve(i):void 0}}var _t=p.createContext(void 0);function Xa(e){var a,t=e.initialProps,r=Ua(),n=Qa(t),o=n.fromDate,i=n.toDate,l=(a=t.captionLayout)!==null&&a!==void 0?a:r.captionLayout;l!=="buttons"&&(!o||!i)&&(l="buttons");var d;(le(t)||Z(t)||ee(t))&&(d=t.onSelect);var f=b(b(b({},r),t),{captionLayout:l,classNames:b(b({},r.classNames),t.classNames),components:b({},t.components),formatters:b(b({},r.formatters),t.formatters),fromDate:o,labels:b(b({},r.labels),t.labels),mode:t.mode||r.mode,modifiers:b(b({},r.modifiers),t.modifiers),modifiersClassNames:b(b({},r.modifiersClassNames),t.modifiersClassNames),onSelect:d,styles:b(b({},r.styles),t.styles),toDate:i});return s.jsx(_t.Provider,{value:f,children:e.children})}function C(){var e=p.useContext(_t);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function Nt(e){var a=C(),t=a.locale,r=a.classNames,n=a.styles,o=a.formatters.formatCaption;return s.jsx("div",{className:r.caption_label,style:n.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:o(e.displayMonth,{locale:t})})}function Ga(e){return s.jsx("svg",b({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Dt(e){var a,t,r=e.onChange,n=e.value,o=e.children,i=e.caption,l=e.className,d=e.style,f=C(),c=(t=(a=f.components)===null||a===void 0?void 0:a.IconDropdown)!==null&&t!==void 0?t:Ga;return s.jsxs("div",{className:l,style:d,children:[s.jsx("span",{className:f.classNames.vhidden,children:e["aria-label"]}),s.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:f.classNames.dropdown,style:f.styles.dropdown,value:n,onChange:r,children:o}),s.jsxs("div",{className:f.classNames.caption_label,style:f.styles.caption_label,"aria-hidden":"true",children:[i,s.jsx(c,{className:f.classNames.dropdown_icon,style:f.styles.dropdown_icon})]})]})}function Ja(e){var a,t=C(),r=t.fromDate,n=t.toDate,o=t.styles,i=t.locale,l=t.formatters.formatMonthCaption,d=t.classNames,f=t.components,c=t.labels.labelMonthDropdown;if(!r)return s.jsx(s.Fragment,{});if(!n)return s.jsx(s.Fragment,{});var u=[];if(Oa(r,n))for(var v=L(r),m=r.getMonth();m<=n.getMonth();m++)u.push(pe(v,m));else for(var v=L(new Date),m=0;m<=11;m++)u.push(pe(v,m));var h=function(y){var _=Number(y.target.value),D=pe(L(e.displayMonth),_);e.onChange(D)},x=(a=f==null?void 0:f.Dropdown)!==null&&a!==void 0?a:Dt;return s.jsx(x,{name:"months","aria-label":c(),className:d.dropdown_month,style:o.dropdown_month,onChange:h,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:i}),children:u.map(function(y){return s.jsx("option",{value:y.getMonth(),children:l(y,{locale:i})},y.getMonth())})})}function Za(e){var a,t=e.displayMonth,r=C(),n=r.fromDate,o=r.toDate,i=r.locale,l=r.styles,d=r.classNames,f=r.components,c=r.formatters.formatYearCaption,u=r.labels.labelYearDropdown,v=[];if(!n)return s.jsx(s.Fragment,{});if(!o)return s.jsx(s.Fragment,{});for(var m=n.getFullYear(),h=o.getFullYear(),x=m;x<=h;x++)v.push(Ue(xa(new Date),x));var y=function(D){var H=Ue(L(t),Number(D.target.value));e.onChange(H)},_=(a=f==null?void 0:f.Dropdown)!==null&&a!==void 0?a:Dt;return s.jsx(_,{name:"years","aria-label":u(),className:d.dropdown_year,style:l.dropdown_year,onChange:y,value:t.getFullYear(),caption:c(t,{locale:i}),children:v.map(function(D){return s.jsx("option",{value:D.getFullYear(),children:c(D,{locale:i})},D.getFullYear())})})}function er(e,a){var t=p.useState(e),r=t[0],n=t[1],o=a===void 0?r:a;return[o,n]}function tr(e){var a=e.month,t=e.defaultMonth,r=e.today,n=a||t||r||new Date,o=e.toDate,i=e.fromDate,l=e.numberOfMonths,d=l===void 0?1:l;if(o&&J(o,n)<0){var f=-1*(d-1);n=E(o,f)}return i&&J(n,i)<0&&(n=i),L(n)}function ar(){var e=C(),a=tr(e),t=er(a,e.month),r=t[0],n=t[1],o=function(i){var l;if(!e.disableNavigation){var d=L(i);n(d),(l=e.onMonthChange)===null||l===void 0||l.call(e,d)}};return[r,o]}function rr(e,a){for(var t=a.reverseMonths,r=a.numberOfMonths,n=L(e),o=L(E(n,r)),i=J(o,n),l=[],d=0;d<i;d++){var f=E(n,d);l.push(f)}return t&&(l=l.reverse()),l}function nr(e,a){if(!a.disableNavigation){var t=a.toDate,r=a.pagedNavigation,n=a.numberOfMonths,o=n===void 0?1:n,i=r?o:1,l=L(e);if(!t)return E(l,i);var d=J(t,e);if(!(d<o))return E(l,i)}}function sr(e,a){if(!a.disableNavigation){var t=a.fromDate,r=a.pagedNavigation,n=a.numberOfMonths,o=n===void 0?1:n,i=r?o:1,l=L(e);if(!t)return E(l,-i);var d=J(l,t);if(!(d<=0))return E(l,-i)}}var Ct=p.createContext(void 0);function or(e){var a=C(),t=ar(),r=t[0],n=t[1],o=rr(r,a),i=nr(r,a),l=sr(r,a),d=function(u){return o.some(function(v){return Te(u,v)})},f=function(u,v){d(u)||(v&&wt(u,v)?n(E(u,1+a.numberOfMonths*-1)):n(u))},c={currentMonth:r,displayMonths:o,goToMonth:n,goToDate:f,previousMonth:l,nextMonth:i,isDateDisplayed:d};return s.jsx(Ct.Provider,{value:c,children:e.children})}function te(){var e=p.useContext(Ct);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function Qe(e){var a,t=C(),r=t.classNames,n=t.styles,o=t.components,i=te().goToMonth,l=function(c){i(E(c,e.displayIndex?-e.displayIndex:0))},d=(a=o==null?void 0:o.CaptionLabel)!==null&&a!==void 0?a:Nt,f=s.jsx(d,{id:e.id,displayMonth:e.displayMonth});return s.jsxs("div",{className:r.caption_dropdowns,style:n.caption_dropdowns,children:[s.jsx("div",{className:r.vhidden,children:f}),s.jsx(Ja,{onChange:l,displayMonth:e.displayMonth}),s.jsx(Za,{onChange:l,displayMonth:e.displayMonth})]})}function ir(e){return s.jsx("svg",b({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function lr(e){return s.jsx("svg",b({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var ne=p.forwardRef(function(e,a){var t=C(),r=t.classNames,n=t.styles,o=[r.button_reset,r.button];e.className&&o.push(e.className);var i=o.join(" "),l=b(b({},n.button_reset),n.button);return e.style&&Object.assign(l,e.style),s.jsx("button",b({},e,{ref:a,type:"button",className:i,style:l}))});function dr(e){var a,t,r=C(),n=r.dir,o=r.locale,i=r.classNames,l=r.styles,d=r.labels,f=d.labelPrevious,c=d.labelNext,u=r.components;if(!e.nextMonth&&!e.previousMonth)return s.jsx(s.Fragment,{});var v=f(e.previousMonth,{locale:o}),m=[i.nav_button,i.nav_button_previous].join(" "),h=c(e.nextMonth,{locale:o}),x=[i.nav_button,i.nav_button_next].join(" "),y=(a=u==null?void 0:u.IconRight)!==null&&a!==void 0?a:lr,_=(t=u==null?void 0:u.IconLeft)!==null&&t!==void 0?t:ir;return s.jsxs("div",{className:i.nav,style:l.nav,children:[!e.hidePrevious&&s.jsx(ne,{name:"previous-month","aria-label":v,className:m,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:n==="rtl"?s.jsx(y,{className:i.nav_icon,style:l.nav_icon}):s.jsx(_,{className:i.nav_icon,style:l.nav_icon})}),!e.hideNext&&s.jsx(ne,{name:"next-month","aria-label":h,className:x,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:n==="rtl"?s.jsx(_,{className:i.nav_icon,style:l.nav_icon}):s.jsx(y,{className:i.nav_icon,style:l.nav_icon})})]})}function Xe(e){var a=C().numberOfMonths,t=te(),r=t.previousMonth,n=t.nextMonth,o=t.goToMonth,i=t.displayMonths,l=i.findIndex(function(h){return Te(e.displayMonth,h)}),d=l===0,f=l===i.length-1,c=a>1&&(d||!f),u=a>1&&(f||!d),v=function(){r&&o(r)},m=function(){n&&o(n)};return s.jsx(dr,{displayMonth:e.displayMonth,hideNext:c,hidePrevious:u,nextMonth:n,previousMonth:r,onPreviousClick:v,onNextClick:m})}function cr(e){var a,t=C(),r=t.classNames,n=t.disableNavigation,o=t.styles,i=t.captionLayout,l=t.components,d=(a=l==null?void 0:l.CaptionLabel)!==null&&a!==void 0?a:Nt,f;return n?f=s.jsx(d,{id:e.id,displayMonth:e.displayMonth}):i==="dropdown"?f=s.jsx(Qe,{displayMonth:e.displayMonth,id:e.id}):i==="dropdown-buttons"?f=s.jsxs(s.Fragment,{children:[s.jsx(Qe,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),s.jsx(Xe,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):f=s.jsxs(s.Fragment,{children:[s.jsx(d,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(Xe,{displayMonth:e.displayMonth,id:e.id})]}),s.jsx("div",{className:r.caption,style:o.caption,children:f})}function ur(e){var a=C(),t=a.footer,r=a.styles,n=a.classNames.tfoot;return t?s.jsx("tfoot",{className:n,style:r.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:t})})}):s.jsx(s.Fragment,{})}function fr(e,a,t){for(var r=t?V(new Date):Y(new Date,{locale:e,weekStartsOn:a}),n=[],o=0;o<7;o++){var i=O(r,o);n.push(i)}return n}function vr(){var e=C(),a=e.classNames,t=e.styles,r=e.showWeekNumber,n=e.locale,o=e.weekStartsOn,i=e.ISOWeek,l=e.formatters.formatWeekdayName,d=e.labels.labelWeekday,f=fr(n,o,i);return s.jsxs("tr",{style:t.head_row,className:a.head_row,children:[r&&s.jsx("td",{style:t.head_cell,className:a.head_cell}),f.map(function(c,u){return s.jsx("th",{scope:"col",className:a.head_cell,style:t.head_cell,"aria-label":d(c,{locale:n}),children:l(c,{locale:n})},u)})]})}function mr(){var e,a=C(),t=a.classNames,r=a.styles,n=a.components,o=(e=n==null?void 0:n.HeadRow)!==null&&e!==void 0?e:vr;return s.jsx("thead",{style:r.head,className:t.head,children:s.jsx(o,{})})}function hr(e){var a=C(),t=a.locale,r=a.formatters.formatDay;return s.jsx(s.Fragment,{children:r(e.date,{locale:t})})}var Pe=p.createContext(void 0);function pr(e){if(!Z(e.initialProps)){var a={selected:void 0,modifiers:{disabled:[]}};return s.jsx(Pe.Provider,{value:a,children:e.children})}return s.jsx(yr,{initialProps:e.initialProps,children:e.children})}function yr(e){var a=e.initialProps,t=e.children,r=a.selected,n=a.min,o=a.max,i=function(f,c,u){var v,m;(v=a.onDayClick)===null||v===void 0||v.call(a,f,c,u);var h=!!(c.selected&&n&&(r==null?void 0:r.length)===n);if(!h){var x=!!(!c.selected&&o&&(r==null?void 0:r.length)===o);if(!x){var y=r?jt([],r,!0):[];if(c.selected){var _=y.findIndex(function(D){return P(f,D)});y.splice(_,1)}else y.push(f);(m=a.onSelect)===null||m===void 0||m.call(a,y,f,c,u)}}},l={disabled:[]};r&&l.disabled.push(function(f){var c=o&&r.length>o-1,u=r.some(function(v){return P(v,f)});return!!(c&&!u)});var d={selected:r,onDayClick:i,modifiers:l};return s.jsx(Pe.Provider,{value:d,children:t})}function Le(){var e=p.useContext(Pe);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function xr(e,a){var t=a||{},r=t.from,n=t.to;return r&&n?P(n,e)&&P(r,e)?void 0:P(n,e)?{from:n,to:void 0}:P(r,e)?void 0:De(r,e)?{from:e,to:n}:{from:r,to:e}:n?De(e,n)?{from:n,to:e}:{from:e,to:n}:r?wt(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var We=p.createContext(void 0);function gr(e){if(!ee(e.initialProps)){var a={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(We.Provider,{value:a,children:e.children})}return s.jsx(br,{initialProps:e.initialProps,children:e.children})}function br(e){var a=e.initialProps,t=e.children,r=a.selected,n=r||{},o=n.from,i=n.to,l=a.min,d=a.max,f=function(m,h,x){var y,_;(y=a.onDayClick)===null||y===void 0||y.call(a,m,h,x);var D=xr(m,r);(_=a.onSelect)===null||_===void 0||_.call(a,D,m,h,x)},c={range_start:[],range_end:[],range_middle:[],disabled:[]};if(o?(c.range_start=[o],i?(c.range_end=[i],P(o,i)||(c.range_middle=[{after:o,before:i}])):c.range_end=[o]):i&&(c.range_start=[i],c.range_end=[i]),l&&(o&&!i&&c.disabled.push({after:he(o,l-1),before:O(o,l-1)}),o&&i&&c.disabled.push({after:o,before:O(o,l-1)}),!o&&i&&c.disabled.push({after:he(i,l-1),before:O(i,l-1)})),d){if(o&&!i&&(c.disabled.push({before:O(o,-d+1)}),c.disabled.push({after:O(o,d-1)})),o&&i){var u=B(i,o)+1,v=d-u;c.disabled.push({before:he(o,v)}),c.disabled.push({after:O(i,v)})}!o&&i&&(c.disabled.push({before:O(i,-d+1)}),c.disabled.push({after:O(i,d-1)}))}return s.jsx(We.Provider,{value:{selected:r,onDayClick:f,modifiers:c},children:t})}function Fe(){var e=p.useContext(We);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function re(e){return Array.isArray(e)?jt([],e,!0):e!==void 0?[e]:[]}function wr(e){var a={};return Object.entries(e).forEach(function(t){var r=t[0],n=t[1];a[r]=re(n)}),a}var I;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(I||(I={}));var jr=I.Selected,A=I.Disabled,_r=I.Hidden,Nr=I.Today,ye=I.RangeEnd,xe=I.RangeMiddle,ge=I.RangeStart,Dr=I.Outside;function Cr(e,a,t){var r,n=(r={},r[jr]=re(e.selected),r[A]=re(e.disabled),r[_r]=re(e.hidden),r[Nr]=[e.today],r[ye]=[],r[xe]=[],r[ge]=[],r[Dr]=[],r);return e.fromDate&&n[A].push({before:e.fromDate}),e.toDate&&n[A].push({after:e.toDate}),Z(e)?n[A]=n[A].concat(a.modifiers[A]):ee(e)&&(n[A]=n[A].concat(t.modifiers[A]),n[ge]=t.modifiers[ge],n[xe]=t.modifiers[xe],n[ye]=t.modifiers[ye]),n}var kt=p.createContext(void 0);function kr(e){var a=C(),t=Le(),r=Fe(),n=Cr(a,t,r),o=wr(a.modifiers),i=b(b({},n),o);return s.jsx(kt.Provider,{value:i,children:e.children})}function Mt(){var e=p.useContext(kt);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function Mr(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Sr(e){return!!(e&&typeof e=="object"&&"from"in e)}function Or(e){return!!(e&&typeof e=="object"&&"after"in e)}function Tr(e){return!!(e&&typeof e=="object"&&"before"in e)}function Pr(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function Lr(e,a){var t,r=a.from,n=a.to;if(r&&n){var o=B(n,r)<0;o&&(t=[n,r],r=t[0],n=t[1]);var i=B(e,r)>=0&&B(n,e)>=0;return i}return n?P(n,e):r?P(r,e):!1}function Wr(e){return at(e)}function Fr(e){return Array.isArray(e)&&e.every(at)}function Er(e,a){return a.some(function(t){if(typeof t=="boolean")return t;if(Wr(t))return P(e,t);if(Fr(t))return t.includes(e);if(Sr(t))return Lr(e,t);if(Pr(t))return t.dayOfWeek.includes(e.getDay());if(Mr(t)){var r=B(t.before,e),n=B(t.after,e),o=r>0,i=n<0,l=De(t.before,t.after);return l?i&&o:o||i}return Or(t)?B(e,t.after)>0:Tr(t)?B(t.before,e)>0:typeof t=="function"?t(e):!1})}function Ee(e,a,t){var r=Object.keys(a).reduce(function(o,i){var l=a[i];return Er(e,l)&&o.push(i),o},[]),n={};return r.forEach(function(o){return n[o]=!0}),t&&!Te(e,t)&&(n.outside=!0),n}function Ir(e,a){for(var t=L(e[0]),r=Se(e[e.length-1]),n,o,i=t;i<=r;){var l=Ee(i,a),d=!l.disabled&&!l.hidden;if(!d){i=O(i,1);continue}if(l.selected)return i;l.today&&!o&&(o=i),n||(n=i),i=O(i,1)}return o||n}var Rr=365;function St(e,a){var t=a.moveBy,r=a.direction,n=a.context,o=a.modifiers,i=a.retry,l=i===void 0?{count:0,lastFocused:e}:i,d=n.weekStartsOn,f=n.fromDate,c=n.toDate,u=n.locale,v={day:O,week:Ne,month:E,year:va,startOfWeek:function(y){return n.ISOWeek?V(y):Y(y,{locale:u,weekStartsOn:d})},endOfWeek:function(y){return n.ISOWeek?bt(y):Oe(y,{locale:u,weekStartsOn:d})}},m=v[t](e,r==="after"?1:-1);r==="before"&&f?m=ma([f,m]):r==="after"&&c&&(m=ha([c,m]));var h=!0;if(o){var x=Ee(m,o);h=!x.disabled&&!x.hidden}return h?m:l.count>Rr?l.lastFocused:St(m,{moveBy:t,direction:r,context:n,modifiers:o,retry:b(b({},l),{count:l.count+1})})}var Ot=p.createContext(void 0);function Yr(e){var a=te(),t=Mt(),r=p.useState(),n=r[0],o=r[1],i=p.useState(),l=i[0],d=i[1],f=Ir(a.displayMonths,t),c=n??(l&&a.isDateDisplayed(l))?l:f,u=function(){d(n),o(void 0)},v=function(y){o(y)},m=C(),h=function(y,_){if(n){var D=St(n,{moveBy:y,direction:_,context:m,modifiers:t});P(n,D)||(a.goToDate(D,n),v(D))}},x={focusedDay:n,focusTarget:c,blur:u,focus:v,focusDayAfter:function(){return h("day","after")},focusDayBefore:function(){return h("day","before")},focusWeekAfter:function(){return h("week","after")},focusWeekBefore:function(){return h("week","before")},focusMonthBefore:function(){return h("month","before")},focusMonthAfter:function(){return h("month","after")},focusYearBefore:function(){return h("year","before")},focusYearAfter:function(){return h("year","after")},focusStartOfWeek:function(){return h("startOfWeek","before")},focusEndOfWeek:function(){return h("endOfWeek","after")}};return s.jsx(Ot.Provider,{value:x,children:e.children})}function Ie(){var e=p.useContext(Ot);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function Ar(e,a){var t=Mt(),r=Ee(e,t,a);return r}var Re=p.createContext(void 0);function Br(e){if(!le(e.initialProps)){var a={selected:void 0};return s.jsx(Re.Provider,{value:a,children:e.children})}return s.jsx(Hr,{initialProps:e.initialProps,children:e.children})}function Hr(e){var a=e.initialProps,t=e.children,r=function(o,i,l){var d,f,c;if((d=a.onDayClick)===null||d===void 0||d.call(a,o,i,l),i.selected&&!a.required){(f=a.onSelect)===null||f===void 0||f.call(a,void 0,o,i,l);return}(c=a.onSelect)===null||c===void 0||c.call(a,o,o,i,l)},n={selected:a.selected,onDayClick:r};return s.jsx(Re.Provider,{value:n,children:t})}function Tt(){var e=p.useContext(Re);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function qr(e,a){var t=C(),r=Tt(),n=Le(),o=Fe(),i=Ie(),l=i.focusDayAfter,d=i.focusDayBefore,f=i.focusWeekAfter,c=i.focusWeekBefore,u=i.blur,v=i.focus,m=i.focusMonthBefore,h=i.focusMonthAfter,x=i.focusYearBefore,y=i.focusYearAfter,_=i.focusStartOfWeek,D=i.focusEndOfWeek,H=function(w){var g,fe,ve,me;le(t)?(g=r.onDayClick)===null||g===void 0||g.call(r,e,a,w):Z(t)?(fe=n.onDayClick)===null||fe===void 0||fe.call(n,e,a,w):ee(t)?(ve=o.onDayClick)===null||ve===void 0||ve.call(o,e,a,w):(me=t.onDayClick)===null||me===void 0||me.call(t,e,a,w)},X=function(w){var g;v(e),(g=t.onDayFocus)===null||g===void 0||g.call(t,e,a,w)},G=function(w){var g;u(),(g=t.onDayBlur)===null||g===void 0||g.call(t,e,a,w)},q=function(w){var g;(g=t.onDayMouseEnter)===null||g===void 0||g.call(t,e,a,w)},de=function(w){var g;(g=t.onDayMouseLeave)===null||g===void 0||g.call(t,e,a,w)},ce=function(w){var g;(g=t.onDayPointerEnter)===null||g===void 0||g.call(t,e,a,w)},ue=function(w){var g;(g=t.onDayPointerLeave)===null||g===void 0||g.call(t,e,a,w)},M=function(w){var g;(g=t.onDayTouchCancel)===null||g===void 0||g.call(t,e,a,w)},k=function(w){var g;(g=t.onDayTouchEnd)===null||g===void 0||g.call(t,e,a,w)},Q=function(w){var g;(g=t.onDayTouchMove)===null||g===void 0||g.call(t,e,a,w)},It=function(w){var g;(g=t.onDayTouchStart)===null||g===void 0||g.call(t,e,a,w)},Rt=function(w){var g;(g=t.onDayKeyUp)===null||g===void 0||g.call(t,e,a,w)},Yt=function(w){var g;switch(w.key){case"ArrowLeft":w.preventDefault(),w.stopPropagation(),t.dir==="rtl"?l():d();break;case"ArrowRight":w.preventDefault(),w.stopPropagation(),t.dir==="rtl"?d():l();break;case"ArrowDown":w.preventDefault(),w.stopPropagation(),f();break;case"ArrowUp":w.preventDefault(),w.stopPropagation(),c();break;case"PageUp":w.preventDefault(),w.stopPropagation(),w.shiftKey?x():m();break;case"PageDown":w.preventDefault(),w.stopPropagation(),w.shiftKey?y():h();break;case"Home":w.preventDefault(),w.stopPropagation(),_();break;case"End":w.preventDefault(),w.stopPropagation(),D();break}(g=t.onDayKeyDown)===null||g===void 0||g.call(t,e,a,w)},At={onClick:H,onFocus:X,onBlur:G,onKeyDown:Yt,onKeyUp:Rt,onMouseEnter:q,onMouseLeave:de,onPointerEnter:ce,onPointerLeave:ue,onTouchCancel:M,onTouchEnd:k,onTouchMove:Q,onTouchStart:It};return At}function zr(){var e=C(),a=Tt(),t=Le(),r=Fe(),n=le(e)?a.selected:Z(e)?t.selected:ee(e)?r.selected:void 0;return n}function $r(e){return Object.values(I).includes(e)}function Kr(e,a){var t=[e.classNames.day];return Object.keys(a).forEach(function(r){var n=e.modifiersClassNames[r];if(n)t.push(n);else if($r(r)){var o=e.classNames["day_".concat(r)];o&&t.push(o)}}),t}function Vr(e,a){var t=b({},e.styles.day);return Object.keys(a).forEach(function(r){var n;t=b(b({},t),(n=e.modifiersStyles)===null||n===void 0?void 0:n[r])}),t}function Ur(e,a,t){var r,n,o,i=C(),l=Ie(),d=Ar(e,a),f=qr(e,d),c=zr(),u=!!(i.onDayClick||i.mode!=="default");p.useEffect(function(){var q;d.outside||l.focusedDay&&u&&P(l.focusedDay,e)&&((q=t.current)===null||q===void 0||q.focus())},[l.focusedDay,e,t,u,d.outside]);var v=Kr(i,d).join(" "),m=Vr(i,d),h=!!(d.outside&&!i.showOutsideDays||d.hidden),x=(o=(n=i.components)===null||n===void 0?void 0:n.DayContent)!==null&&o!==void 0?o:hr,y=s.jsx(x,{date:e,displayMonth:a,activeModifiers:d}),_={style:m,className:v,children:y,role:"gridcell"},D=l.focusTarget&&P(l.focusTarget,e)&&!d.outside,H=l.focusedDay&&P(l.focusedDay,e),X=b(b(b({},_),(r={disabled:d.disabled,role:"gridcell"},r["aria-selected"]=d.selected,r.tabIndex=H||D?0:-1,r)),f),G={isButton:u,isHidden:h,activeModifiers:d,selectedDays:c,buttonProps:X,divProps:_};return G}function Qr(e){var a=p.useRef(null),t=Ur(e.date,e.displayMonth,a);return t.isHidden?s.jsx("div",{role:"gridcell"}):t.isButton?s.jsx(ne,b({name:"day",ref:a},t.buttonProps)):s.jsx("div",b({},t.divProps))}function Xr(e){var a=e.number,t=e.dates,r=C(),n=r.onWeekNumberClick,o=r.styles,i=r.classNames,l=r.locale,d=r.labels.labelWeekNumber,f=r.formatters.formatWeekNumber,c=f(Number(a),{locale:l});if(!n)return s.jsx("span",{className:i.weeknumber,style:o.weeknumber,children:c});var u=d(Number(a),{locale:l}),v=function(m){n(a,t,m)};return s.jsx(ne,{name:"week-number","aria-label":u,className:i.weeknumber,style:o.weeknumber,onClick:v,children:c})}function Gr(e){var a,t,r=C(),n=r.styles,o=r.classNames,i=r.showWeekNumber,l=r.components,d=(a=l==null?void 0:l.Day)!==null&&a!==void 0?a:Qr,f=(t=l==null?void 0:l.WeekNumber)!==null&&t!==void 0?t:Xr,c;return i&&(c=s.jsx("td",{className:o.cell,style:n.cell,children:s.jsx(f,{number:e.weekNumber,dates:e.dates})})),s.jsxs("tr",{className:o.row,style:n.row,children:[c,e.dates.map(function(u){return s.jsx("td",{className:o.cell,style:n.cell,role:"presentation",children:s.jsx(d,{displayMonth:e.displayMonth,date:u})},_a(u))})]})}function Ge(e,a,t){for(var r=t!=null&&t.ISOWeek?bt(a):Oe(a,t),n=t!=null&&t.ISOWeek?V(e):Y(e,t),o=B(r,n),i=[],l=0;l<=o;l++)i.push(O(n,l));var d=i.reduce(function(f,c){var u=t!=null&&t.ISOWeek?wa(c):ka(c,t),v=f.find(function(m){return m.weekNumber===u});return v?(v.dates.push(c),f):(f.push({weekNumber:u,dates:[c]}),f)},[]);return d}function Jr(e,a){var t=Ge(L(e),Se(e),a);if(a!=null&&a.useFixedWeeks){var r=Sa(e,a);if(r<6){var n=t[t.length-1],o=n.dates[n.dates.length-1],i=Ne(o,6-r),l=Ge(Ne(o,1),i,a);t.push.apply(t,l)}}return t}function Zr(e){var a,t,r,n=C(),o=n.locale,i=n.classNames,l=n.styles,d=n.hideHead,f=n.fixedWeeks,c=n.components,u=n.weekStartsOn,v=n.firstWeekContainsDate,m=n.ISOWeek,h=Jr(e.displayMonth,{useFixedWeeks:!!f,ISOWeek:m,locale:o,weekStartsOn:u,firstWeekContainsDate:v}),x=(a=c==null?void 0:c.Head)!==null&&a!==void 0?a:mr,y=(t=c==null?void 0:c.Row)!==null&&t!==void 0?t:Gr,_=(r=c==null?void 0:c.Footer)!==null&&r!==void 0?r:ur;return s.jsxs("table",{id:e.id,className:i.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!d&&s.jsx(x,{}),s.jsx("tbody",{className:i.tbody,style:l.tbody,children:h.map(function(D){return s.jsx(y,{displayMonth:e.displayMonth,dates:D.dates,weekNumber:D.weekNumber},D.weekNumber)})}),s.jsx(_,{displayMonth:e.displayMonth})]})}function en(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var tn=en()?p.useLayoutEffect:p.useEffect,be=!1,an=0;function Je(){return"react-day-picker-".concat(++an)}function rn(e){var a,t=e??(be?Je():null),r=p.useState(t),n=r[0],o=r[1];return tn(function(){n===null&&o(Je())},[]),p.useEffect(function(){be===!1&&(be=!0)},[]),(a=e??n)!==null&&a!==void 0?a:void 0}function nn(e){var a,t,r=C(),n=r.dir,o=r.classNames,i=r.styles,l=r.components,d=te().displayMonths,f=rn(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),c=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,u=[o.month],v=i.month,m=e.displayIndex===0,h=e.displayIndex===d.length-1,x=!m&&!h;n==="rtl"&&(a=[m,h],h=a[0],m=a[1]),m&&(u.push(o.caption_start),v=b(b({},v),i.caption_start)),h&&(u.push(o.caption_end),v=b(b({},v),i.caption_end)),x&&(u.push(o.caption_between),v=b(b({},v),i.caption_between));var y=(t=l==null?void 0:l.Caption)!==null&&t!==void 0?t:cr;return s.jsxs("div",{className:u.join(" "),style:v,children:[s.jsx(y,{id:f,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(Zr,{id:c,"aria-labelledby":f,displayMonth:e.displayMonth})]},e.displayIndex)}function sn(e){var a=C(),t=a.classNames,r=a.styles;return s.jsx("div",{className:t.months,style:r.months,children:e.children})}function on(e){var a,t,r=e.initialProps,n=C(),o=Ie(),i=te(),l=p.useState(!1),d=l[0],f=l[1];p.useEffect(function(){n.initialFocus&&o.focusTarget&&(d||(o.focus(o.focusTarget),f(!0)))},[n.initialFocus,d,o.focus,o.focusTarget,o]);var c=[n.classNames.root,n.className];n.numberOfMonths>1&&c.push(n.classNames.multiple_months),n.showWeekNumber&&c.push(n.classNames.with_weeknumber);var u=b(b({},n.styles.root),n.style),v=Object.keys(r).filter(function(h){return h.startsWith("data-")}).reduce(function(h,x){var y;return b(b({},h),(y={},y[x]=r[x],y))},{}),m=(t=(a=r.components)===null||a===void 0?void 0:a.Months)!==null&&t!==void 0?t:sn;return s.jsx("div",b({className:c.join(" "),style:u,dir:n.dir,id:n.id,nonce:r.nonce,title:r.title,lang:r.lang},v,{children:s.jsx(m,{children:i.displayMonths.map(function(h,x){return s.jsx(nn,{displayIndex:x,displayMonth:h},x)})})}))}function ln(e){var a=e.children,t=Ta(e,["children"]);return s.jsx(Xa,{initialProps:t,children:s.jsx(or,{children:s.jsx(Br,{initialProps:t,children:s.jsx(pr,{initialProps:t,children:s.jsx(gr,{initialProps:t,children:s.jsx(kr,{children:s.jsx(Yr,{children:a})})})})})})})}function dn(e){return s.jsx(ln,b({},e,{children:s.jsx(on,{initialProps:e})}))}function Ye({className:e,classNames:a,showOutsideDays:t=!0,...r}){return s.jsx(dn,{showOutsideDays:t,className:S("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:S(Ke({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:S(Ke({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:({...n})=>s.jsx(yt,{className:"h-4 w-4"}),IconRight:({...n})=>s.jsx(xt,{className:"h-4 w-4"})},...r})}Ye.displayName="Calendar";const Pt=Gt,cn=Jt,un=Xt,Lt=p.forwardRef(({className:e,...a},t)=>s.jsx(st,{ref:t,className:S("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));Lt.displayName=st.displayName;const Ae=p.forwardRef(({className:e,children:a,...t},r)=>s.jsxs(un,{children:[s.jsx(Lt,{}),s.jsxs(ot,{ref:r,className:S("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[a,s.jsxs(Qt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(Bt,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ae.displayName=ot.displayName;const Be=({className:e,...a})=>s.jsx("div",{className:S("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});Be.displayName="DialogHeader";const He=p.forwardRef(({className:e,...a},t)=>s.jsx(it,{ref:t,className:S("text-lg font-semibold leading-none tracking-tight",e),...a}));He.displayName=it.displayName;const qe=p.forwardRef(({className:e,...a},t)=>s.jsx(lt,{ref:t,className:S("text-sm text-muted-foreground",e),...a}));qe.displayName=lt.displayName;const Wt=p.forwardRef(({className:e,...a},t)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:t,className:S("w-full caption-bottom text-sm",e),...a})}));Wt.displayName="Table";const Ft=p.forwardRef(({className:e,...a},t)=>s.jsx("thead",{ref:t,className:S("[&_tr]:border-b",e),...a}));Ft.displayName="TableHeader";const Et=p.forwardRef(({className:e,...a},t)=>s.jsx("tbody",{ref:t,className:S("[&_tr:last-child]:border-0",e),...a}));Et.displayName="TableBody";const fn=p.forwardRef(({className:e,...a},t)=>s.jsx("tfoot",{ref:t,className:S("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...a}));fn.displayName="TableFooter";const Ce=p.forwardRef(({className:e,...a},t)=>s.jsx("tr",{ref:t,className:S("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...a}));Ce.displayName="TableRow";const z=p.forwardRef(({className:e,...a},t)=>s.jsx("th",{ref:t,className:S("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...a}));z.displayName="TableHead";const $=p.forwardRef(({className:e,...a},t)=>s.jsx("td",{ref:t,className:S("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...a}));$.displayName="TableCell";const vn=p.forwardRef(({className:e,...a},t)=>s.jsx("caption",{ref:t,className:S("mt-4 text-sm text-muted-foreground",e),...a}));vn.displayName="TableCaption";const mn=({disabledDays:e})=>{const{toast:a}=se(),t=ke(),[r,n]=p.useState(void 0),[o,i]=p.useState("10"),[l,d]=p.useState("10"),[f,c]=p.useState(!1),u=async()=>{if(!r){a({title:"Erreur",description:"Veuillez sélectionner une date",variant:"destructive"});return}c(!0);try{const v=W(r,"yyyy-MM-dd"),m=parseInt(o),h=parseInt(l),{error:x}=await T.from("slots").insert({date:v,circuit_1_capacity:m,circuit_2_capacity:h,circuit_1_available:m,circuit_2_available:h});if(x)throw x;a({title:"Succès",description:"Le créneau a été créé avec succès"}),n(void 0),i("10"),d("10"),await Promise.all([t.invalidateQueries({queryKey:["slots"]}),t.refetchQueries({queryKey:["slots"]})])}catch(v){a({title:"Erreur",description:v.message,variant:"destructive"})}finally{c(!1)}};return s.jsxs("div",{className:"grid gap-6",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("label",{className:"font-medium",children:"Sélectionnez une date"}),s.jsx(Ye,{mode:"single",selected:r,onSelect:n,disabled:e,locale:K}),r&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Date sélectionnée : ",W(r,"dd MMMM yyyy",{locale:K})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("label",{htmlFor:"circuit1",className:"font-medium",children:"Places circuit motocross"}),s.jsx(_e,{id:"circuit1",type:"number",min:"0",value:o,onChange:v=>i(v.target.value)})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("label",{htmlFor:"circuit2",className:"font-medium",children:"Places circuit supercross"}),s.jsx(_e,{id:"circuit2",type:"number",min:"0",value:l,onChange:v=>d(v.target.value)})]})]}),s.jsx(F,{onClick:u,disabled:!r||f,children:"Créer le créneau"})]})},hn=({slots:e})=>{const{toast:a}=se(),t=ke(),[r,n]=p.useState(!1),[o,i]=p.useState(!1),[l,d]=p.useState(void 0),[f,c]=p.useState(null),u=async m=>{n(!0);try{const{error:h}=await T.from("slots").delete().eq("id",m);if(h)throw h;a({title:"Succès",description:"Le créneau et ses réservations ont été supprimés"}),await Promise.all([t.invalidateQueries({queryKey:["slots"]}),t.refetchQueries({queryKey:["slots"]})])}catch(h){a({title:"Erreur",description:h.message,variant:"destructive"})}finally{n(!1)}},v=async m=>{if(!l){a({title:"Erreur",description:"Veuillez sélectionner une date",variant:"destructive"});return}i(!0);try{const{error:h}=await T.from("slots").update({date:W(l,"yyyy-MM-dd"),updated_at:new Date().toISOString()}).eq("id",m);if(h)throw h;a({title:"Succès",description:"La date du créneau a été mise à jour"}),d(void 0),c(null),await Promise.all([t.invalidateQueries({queryKey:["slots"]}),t.refetchQueries({queryKey:["slots"]})])}catch(h){a({title:"Erreur",description:h.message,variant:"destructive"})}finally{i(!1)}};return s.jsxs("div",{className:"mt-8",children:[s.jsx("h3",{className:"font-semibold mb-4",children:"Créneaux existants"}),s.jsx("div",{className:"grid gap-4",children:e.map(m=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:W(new Date(m.date),"dd MMMM yyyy",{locale:K})}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Circuit motocross : ",m.circuit_1_available," places disponibles sur ",m.circuit_1_capacity," | Circuit supercross : ",m.circuit_2_available," places disponibles sur ",m.circuit_2_capacity]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Pt,{children:[s.jsx(cn,{asChild:!0,children:s.jsx(F,{variant:"outline",size:"icon",onClick:()=>c(m.id),className:"transition-transform hover:scale-110",children:s.jsx(aa,{className:"h-5 w-5 text-secondary"})})}),s.jsxs(Ae,{children:[s.jsxs(Be,{children:[s.jsx(He,{children:"Modifier la date"}),s.jsx(qe,{children:"Sélectionnez une nouvelle date pour ce créneau. Les réservations existantes seront conservées."})]}),s.jsx("div",{className:"py-4",children:s.jsx(Ye,{mode:"single",selected:l,onSelect:d,locale:K})}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(F,{variant:"outline",onClick:()=>{d(void 0),c(null)},children:"Annuler"}),s.jsx(F,{onClick:()=>v(m.id),disabled:!l||o,children:"Confirmer"})]})]})]}),s.jsx(F,{variant:"ghost",size:"icon",onClick:()=>u(m.id),disabled:r,className:"transition-transform hover:scale-110",children:s.jsx(Me,{className:"h-5 w-5 text-primary"})})]})]},m.id))})]})},pn=()=>{Ut();const{data:e,isLoading:a}=ie({queryKey:["slots"],queryFn:async()=>{const r=new Date;r.setHours(0,0,0,0);const{data:n,error:o}=await T.from("slots").select("*").gte("date",r.toISOString().split("T")[0]).order("date",{ascending:!0});if(o)throw o;return n},staleTime:0,gcTime:0}),t=(e==null?void 0:e.map(r=>new Date(r.date)))||[];return s.jsxs(we,{children:[s.jsxs(rt,{children:[s.jsx(nt,{children:"Gestion des disponibilités"}),s.jsx(zt,{children:"Créez des créneaux de réservation pour les circuits. Les créneaux sont de 14h à 18h."})]}),s.jsx(je,{children:a?s.jsx("div",{children:"Chargement..."}):s.jsxs(s.Fragment,{children:[s.jsx(mn,{disabledDays:t}),s.jsx(hn,{slots:e||[]})]})})]})},Ze=({circuitNumber:e})=>{const{toast:a}=se(),t=ke(),[r,n]=p.useState(!1),[o,i]=p.useState(!1),{data:l,isLoading:d}=ie({queryKey:["bookings",e],queryFn:async()=>{const{data:u,error:v}=await T.from("bookings").select(`
          *,
          profiles (
            email,
            full_name
          ),
          slots (
            date
          )
        `).eq("circuit_number",e).order("created_at",{ascending:!1});if(v)throw v;return u}});p.useEffect(()=>{const u=T.channel("bookings-list-changes").on("postgres_changes",{event:"*",schema:"public",table:"bookings"},()=>{t.invalidateQueries({queryKey:["bookings"]})}).subscribe();return()=>{T.removeChannel(u)}},[t]);const f=async u=>{n(!0);try{const{error:v}=await T.from("bookings").delete().eq("id",u);if(v)throw v;a({title:"Succès",description:"La réservation a été supprimée"}),t.invalidateQueries({queryKey:["bookings"]})}catch(v){a({title:"Erreur",description:v.message,variant:"destructive"})}finally{n(!1)}},c=async(u,v)=>{i(!0);try{const m=v==="paid"?"pending":"paid",{error:h}=await T.from("bookings").update({payment_status:m}).eq("id",u);if(h)throw console.error("Update error:",h),h;a({title:"Succès",description:"Le statut du paiement a été mis à jour"}),t.invalidateQueries({queryKey:["bookings"]})}catch(m){console.error("Error in handleUpdatePaymentStatus:",m),a({title:"Erreur",description:m.message,variant:"destructive"})}finally{i(!1)}};return s.jsxs(we,{children:[s.jsx(rt,{children:s.jsxs(nt,{children:["Réservations ",e===1?"Motocross":"Supercross"]})}),s.jsx(je,{children:d?s.jsx("div",{children:"Chargement..."}):!l||l.length===0?s.jsx("p",{className:"text-muted-foreground",children:"Aucune réservation trouvée."}):s.jsx("div",{className:"space-y-4",children:l.map(u=>{var v,m;return s.jsx(we,{children:s.jsx(je,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold",children:((v=u.profiles)==null?void 0:v.full_name)||((m=u.profiles)==null?void 0:m.email)}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Date : ",W(new Date(u.slots.date),"dd MMMM yyyy",{locale:K})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Nombre de pilotes : ",u.number_of_pilots]}),s.jsx("div",{className:"mt-2",children:s.jsxs(gt,{className:`${u.payment_status==="paid"?"bg-success text-white":"bg-[#8E9196] text-white"}`,children:["Paiement : ",u.payment_status==="paid"?"Payé":"En attente"]})})]}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx(F,{variant:"outline",size:"icon",onClick:()=>c(u.id,u.payment_status),disabled:o,children:u.payment_status==="paid"?s.jsx(sa,{className:"h-4 w-4"}):s.jsx(ra,{className:"h-4 w-4"})}),s.jsxs(dt,{children:[s.jsx(Zt,{asChild:!0,children:s.jsx(F,{variant:"ghost",size:"icon",disabled:r,className:"hover:bg-transparent",children:s.jsx(Me,{className:"h-4 w-4 text-primary"})})}),s.jsxs(ct,{children:[s.jsxs(ut,{children:[s.jsx(ft,{children:"Confirmer la suppression"}),s.jsx(vt,{children:"Êtes-vous sûr de vouloir supprimer cette réservation ? Cette action est irréversible."})]}),s.jsxs(mt,{children:[s.jsx(ht,{children:"Annuler"}),s.jsx(pt,{onClick:()=>f(u.id),children:"Supprimer"})]})]})]})]})]})})},u.id)})})})]})},yn=({messages:e,onMessageSelect:a,onDeleteClick:t})=>s.jsxs(Wt,{children:[s.jsx(Ft,{children:s.jsxs(Ce,{children:[s.jsx(z,{children:"Date"}),s.jsx(z,{children:"Nom"}),s.jsx(z,{children:"Email"}),s.jsx(z,{children:"Message"}),s.jsx(z,{children:"Statut"}),s.jsx(z,{children:"Actions"})]})}),s.jsx(Et,{children:e.map(r=>s.jsxs(Ce,{children:[s.jsx($,{children:W(new Date(r.created_at),"dd/MM/yyyy",{locale:K})}),s.jsx($,{children:r.full_name}),s.jsx($,{children:r.email}),s.jsx($,{className:"max-w-xs truncate",children:r.message}),s.jsx($,{children:s.jsx(gt,{variant:r.status==="replied"?"secondary":"outline",children:r.status==="replied"?"Répondu":"En attente"})}),s.jsx($,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(F,{variant:"outline",size:"sm",onClick:()=>a(r),children:"Voir"}),s.jsx(F,{variant:"outline",size:"sm",onClick:()=>t(r.id),children:s.jsx(Me,{className:"h-4 w-4"})})]})})]},r.id))})]}),xn=({message:e,replyText:a,submitting:t,onOpenChange:r,onReplyChange:n,onReplySubmit:o})=>e?s.jsx(Pt,{open:!!e,onOpenChange:r,children:s.jsxs(Ae,{className:"max-w-2xl",children:[s.jsxs(Be,{children:[s.jsxs(He,{children:["Message de ",e.full_name]}),s.jsxs(qe,{children:["Reçu le ",W(new Date(e.created_at),"dd MMMM yyyy à HH:mm",{locale:K})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Message original :"}),s.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.message})]}),e.admin_response&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Réponse précédente :"}),s.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.admin_response})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Votre réponse :"}),s.jsx(ea,{value:a,onChange:i=>n(i.target.value),placeholder:"Écrivez votre réponse ici...",className:"min-h-[150px]"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(F,{variant:"outline",onClick:()=>r(!1),children:"Annuler"}),s.jsx(F,{onClick:o,disabled:!a.trim()||t,children:t?"Envoi en cours...":"Envoyer la réponse"})]})]})]})}):null,gn=({open:e,onOpenChange:a,onConfirm:t})=>s.jsx(dt,{open:e,onOpenChange:a,children:s.jsxs(ct,{children:[s.jsxs(ut,{children:[s.jsx(ft,{children:"Supprimer le message"}),s.jsx(vt,{children:"Êtes-vous sûr de vouloir supprimer ce message ? Cette action est irréversible."})]}),s.jsxs(mt,{children:[s.jsx(ht,{children:"Annuler"}),s.jsx(pt,{onClick:t,className:"bg-red-500 hover:bg-red-600",children:"Supprimer"})]})]})}),bn=({value:e,onChange:a})=>s.jsxs("div",{className:"relative",children:[s.jsx(na,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(_e,{type:"text",placeholder:"Rechercher un message...",value:e,onChange:t=>a(t.target.value),className:"pl-10"})]}),wn=()=>{const[e,a]=p.useState({}),[t,r]=p.useState({}),[n,o]=p.useState(null),[i,l]=p.useState(!1),[d,f]=p.useState(null),[c,u]=p.useState("date"),[v,m]=p.useState("desc"),[h,x]=p.useState({read:null,replied:null,text:""}),{toast:y}=se(),{data:_,refetch:D}=ie({queryKey:["contact-messages",c,v,h],queryFn:async()=>{let M=T.from("contact_messages").select("*").order(c==="date"?"created_at":c==="name"?"full_name":"status",{ascending:v==="asc"});h.read!==null&&(M=M.eq("read",h.read)),h.replied!==null&&(M=M.eq("status",h.replied?"replied":"pending"));const{data:k,error:Q}=await M;if(Q)throw Q;return k}}),H=async M=>{if(!M.read){const{error:k}=await T.from("contact_messages").update({read:!0}).eq("id",M.id);k?console.error("Error marking message as read:",k):D()}o(M)},X=M=>{a(k=>({...k,[(n==null?void 0:n.id)||""]:M}))},G=async()=>{var M;if(!((M=e[(n==null?void 0:n.id)||""])!=null&&M.trim())){y({variant:"destructive",title:"Erreur",description:"La réponse ne peut pas être vide"});return}r(k=>({...k,[(n==null?void 0:n.id)||""]:!0}));try{const{error:k}=await T.from("contact_messages").update({admin_response:e[(n==null?void 0:n.id)||""],status:"replied"}).eq("id",n==null?void 0:n.id);if(k)throw k;y({title:"Réponse envoyée",description:"La réponse a été enregistrée avec succès"}),await D(),a(Q=>({...Q,[(n==null?void 0:n.id)||""]:""})),o(null)}catch(k){console.error("Error sending reply:",k),y({variant:"destructive",title:"Erreur",description:"Une erreur est survenue lors de l'envoi de la réponse"})}finally{r(k=>({...k,[(n==null?void 0:n.id)||""]:!1}))}},q=M=>{f(M),l(!0)},de=async M=>{try{const{error:k}=await T.from("contact_messages").delete().eq("id",M);if(k)throw k;y({title:"Message supprimé",description:"Le message a été supprimé avec succès"}),l(!1),f(null)}catch(k){console.error("Erreur lors de la suppression du message:",k),y({variant:"destructive",title:"Erreur",description:k.message})}},ce=M=>{M||o(null)},ue=M=>{x(k=>({...k,text:M}))};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Messages de contact"}),s.jsx(bn,{value:h.text,onChange:ue})]}),s.jsx(yn,{messages:_||[],onMessageSelect:H,onDeleteClick:q}),s.jsx(xn,{message:n,replyText:e[(n==null?void 0:n.id)||""]||"",submitting:t[(n==null?void 0:n.id)||""],onOpenChange:ce,onReplyChange:X,onReplySubmit:G}),s.jsx(gn,{open:i,onOpenChange:l,onConfirm:()=>d&&de(d)})]})},Ln=()=>{const{user:e}=Ht(),[a,t]=p.useState("slots"),r=p.useRef(null),[n,o]=p.useState(!1),[i,l]=p.useState(!1),[d,f]=p.useState(!1),c=[{value:"slots",label:"Créneaux"},{value:"motocross",label:"Réservations Motocross"},{value:"supercross",label:"Réservations Supercross"},{value:"messages",label:"Messages"}],u=()=>{if(r.current){const{scrollLeft:x,scrollWidth:y,clientWidth:_}=r.current;l(x>0),f(x<y-_-1)}};p.useEffect(()=>{const x=()=>{o(window.innerWidth<768)};return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]),p.useEffect(()=>(u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)),[]);const v=x=>{if(r.current){const _=x==="left"?r.current.scrollLeft-200:r.current.scrollLeft+200;r.current.scrollTo({left:_,behavior:"smooth"}),setTimeout(u,100)}},{data:m,isLoading:h}=ie({queryKey:["profile",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))return null;const{data:x}=await T.from("profiles").select("*").eq("id",e.id).single();return x},enabled:!!(e!=null&&e.id)});return e?h?s.jsx("div",{className:"container mx-auto py-8",children:"Chargement..."}):(m==null?void 0:m.role)!=="admin"?s.jsx(ze,{to:"/",replace:!0}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-8",children:"Tableau de bord administrateur"}),s.jsx(ta,{dir:"ltr",children:s.jsxs($t,{value:a,onValueChange:t,className:"space-y-6",children:[s.jsxs("div",{className:"relative flex items-center gap-2",children:[n&&s.jsx(F,{variant:"outline",size:"icon",onClick:()=>v("left"),disabled:!i,className:"flex md:hidden min-w-10 z-10","aria-label":"Défiler vers la gauche",children:s.jsx(yt,{className:"h-4 w-4"})}),s.jsx("div",{ref:r,className:"w-full overflow-x-auto scrollbar-hide",onScroll:u,children:s.jsx(Kt,{className:"w-full md:w-auto flex justify-start md:inline-flex",children:c.map(x=>s.jsx(Vt,{value:x.value,className:"flex-1 md:flex-none whitespace-nowrap",children:x.label},x.value))})}),n&&s.jsx(F,{variant:"outline",size:"icon",onClick:()=>v("right"),disabled:!d,className:"flex md:hidden min-w-10 z-10","aria-label":"Défiler vers la droite",children:s.jsx(xt,{className:"h-4 w-4"})})]}),s.jsx(ae,{value:"slots",className:"min-h-[300px]",children:s.jsx(pn,{})}),s.jsx(ae,{value:"motocross",className:"min-h-[300px]",children:s.jsx(Ze,{circuitNumber:1})}),s.jsx(ae,{value:"supercross",className:"min-h-[300px]",children:s.jsx(Ze,{circuitNumber:2})}),s.jsx(ae,{value:"messages",className:"min-h-[300px]",children:s.jsx(wn,{})})]})})]}):s.jsx(ze,{to:"/",replace:!0})};export{Ln as default};
//# sourceMappingURL=Dashboard-ffd81dd3.js.map
